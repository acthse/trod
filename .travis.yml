language: python
python: "3.7"

sudo: true

install: true

service:
  - mysql

before_install: 
  - mysql -e 'CREATE DATABASE trod;'
  - export TROD_DB_URL=mysql://root@localhost:3306/trod
  - pip install aiomysql
  - pip install pytest
  - pip install pytest-asyncio
  - pip install pytest-cov
  - pip install codecov
  - pip install pylint

script: 
  - pylint trod --jobs=4 --reports=yes
  - pytest -svq --color=yes --cov=trod tests/

after_success:
  - codecov
